clear;
clc;
close all;

rec_xyz = [ 0 0 0];

SPos = [
         -25735730.0293559          6457511.94972503           2985806.1126653
          9508633.81920486          15633944.7754916          19352734.8550446
         -25543395.0453964         -976280.090527787          7309854.08084256
         -6532319.00578508          14344527.2943202          21327413.3467308
            -18672082.7406          12559307.9852415          14382765.0872078
          -7000661.3304433          25175631.9083979         -2394229.20165693
          ];
          
      obs = [          23513814.0635124
          22622822.5847599
          24378222.6315829
          20812666.5923937
           21229348.679474
          21462068.7623378];

for i = 1:6
     b(i) = (obs(i,1) - vecnorm(SPos(i,:) - rec_xyz)); 
     A(i, :) =  [(-(SPos(i,1) - rec_xyz(1))) / obs(i) ,(-(SPos(i,2) - rec_xyz(2))) / obs(i) ,(-(SPos(i,3) - rec_xyz(3))) / obs(i) , 1 ];
end;
        
      delta_xyzb   = A \ b';
      delta_xyzb
      
      
      X = [ 0 0 0 0]';
      
      [X, delta, G] = ch_gpsls(X,  SPos',  obs');
      X
      