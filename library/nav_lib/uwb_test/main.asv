%% clear environment
clc;
close all;
clear;

%%
load('uwb_test_dataset1.mat');

%% remove outliler
tof = dataset.uwb.tof;
t = 1:length(tof);

line = tof(3,:)';
old = line;

for i = 1:2
    d = diff(line);
    outliter =  find(abs(d)>0.1);
    
    for n= 1:length(outliter)
        j = 1;
        while( abs(line(outliter(n)) -  line(outliter(n)-j)) <0.1)
            j =j +1;
        end
          line(outliter(n)) = m line(outliter(n)-j);
    end
end

norm(old - line)
figure;
plot(line, '.');

% B = movmean(tof,4,2);
% plot(t, tof);
% %plot(t,tof, '-',t,B, '-o')
% legend();

% tof = line';
%
%
%
% dataset.uwb.cnt = 3;
% dataset.uwb.anchor = [0,0; 2.5, 0; 0, 8]';
% n = length(tof);
%
%
% pos = [ 1 0]';
% dataset.uwb.pos = zeros(2,n);
%
% for i = 1:n
%     pos =  ch_multilateration(dataset.uwb.anchor, pos, tof(:,i)');
%     dataset.uwb.pos(:,i)   =pos;
% end
%
% %% plot data
% ch_plot_uwb(dataset.uwb, 2);
%

